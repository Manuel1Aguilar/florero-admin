<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin - Manage Orders</title>
  <link rel="stylesheet" href="/styles.css">
  <script src="https://unpkg.com/htmx.org@1.6.1"></script>
</head>
<body>
  <% if (!authenticated) { %>
    <script>
      window.location.href = '/admin';
    </script>
  <% } %>
  <h1>Manage Orders</h1>

  <table>
    <thead>
      <tr>
        <th>Order ID</th>
        <th>Client Name</th>
        <th>Order Code</th>
        <th>Color Specification</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% orders.forEach(order => { %>
        <tr id="order-<%= order.id %>">
          <td><%= order.id %></td>
          <td><%= order.client_name %></td>
          <td><%= order.order_code %></td>
          <td><%= order.color_spec %></td>
          <td><%= order.status %></td>
          <td>
            <% if (order.status === 'Pending') { %>
              <button hx-post="/admin/confirm-order" hx-target="#order-<%= order.id %>" hx-swap="outerHTML" hx-vals='{"order_id": "<%= order.id %>"}'>Confirm</button>
              <button hx-post="/admin/deny-order" hx-target="#order-<%= order.id %>" hx-swap="outerHTML" hx-vals='{"order_id": "<%= order.id %>"}'>Deny</button>
            <% } %>
          </td>
          <td>
              <button hx-post="/admin/delete-order" hx-target="#order-<%= order.id %>" hx-swap="outerHTML" hx-vals='{"order_id": "<%= order.id %>"}'>Delete</button>
          </td>
          <td>
              <button hx-get="/admin/view-order/<%= order.id %>" hx-target="body" hx-swap="innerHTML">View Order</button>
          </td>
        </tr>
      <% }); %>
    </tbody>
  </table>

  <a href="/admin/manage-stock" hx-get="/admin/manage-stock" hx-target="body" hx-swap="innerHTML">Manage Stock</a>
</body>
</html>

